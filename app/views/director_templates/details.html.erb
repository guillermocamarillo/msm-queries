<h1>Director #<%= @the_director.id %> details</h1>

<a href="/directors">Go back</a>

<div>
  <a href="/delete_director/<%= @the_director.id%>">Delete director</a>
</div>

<hr>

<form action="/modify_director_record/<%= @the_director.id %>" method="post">
  <div>
    <label for="name_field">Name</label>
    <input id="name_field" type="text" name="dir_name" value="<%= @the_director.name %>">
  </div>

  <div>
    <label for="dob_field">Dob</label>
    <input id="dob_field" type="date" name="dir_dob" value="<%= @the_director.dob%>">
  </div>

  <div>
    <label for="bio_field">Bio</label>
      <textarea id="bio_box" name="dir_bio" rows="3"><%=@the_director.bio%></textarea>
  </div>
  </div>

  <div>
    <label for="image_field">Image</label>
    <input id="image_field" type="text" name="dir_image" value="<%= @the_director.image%>">
  </div>

  <button>
    Update Director
  </button>
</form>


<hr>

<dl>
  <dt>Name</dt>
  <dd><%= @the_director.name %></dd>

  <dt>Dob</dt>
  <dd><%= @the_director.dob %></dd>

  <dt>Bio</dt>
  <dd><%= @the_director.bio %></dd>

  <dt>Image</dt>
  <dd><img src="<%= @the_director.image %>" width="200"></dd>

  <dt>Created at</dt>
  <dd><%= @the_director.created_at %></dd>

  <dt>Updated at</dt>
  <dd><%= @the_director.updated_at %></dd>
</dl>

<h2>Filmography</h2>

<% matching_movies = Movie.where({ :director_id => @the_director.id }) %>

<table border="1">
  <tr>
    <th>ID</th>
    <th>Image</th>
    <th>Title</th>
    <th>Year</th>
    <th>Director</th>
    <th></th>
  </tr>

  <% matching_movies.each do |a_movie| %>
    <tr>
      <td><%= a_movie.id %></td>
      <td><img src="<%= a_movie.image %>" width="50"></td>
      <td><%= a_movie.title %></td>
      <td><%= a_movie.year %></td>
      <td><%= @the_director.name %></td>
      <td>
        <a href="/movies/<%= a_movie.id %>">
          Show details
        </a>
      </td>
    </tr>
  <% end %>

</table>
